<!DOCTYPE html>
<html>
<head>
  <title>Jasmine Spec Runner</title>
</head>

<body>
  <h1>Meals</h1>
  <ul data-bind="foreach: breakfasts">
    <li data-bind="text: id"></li>
  </ul>
  <script type="text/javascript" src="./lib/require.js"></script>

  <script type="text/javascript">
    require.config(
      {
        baseUrl : '..',
        paths: {
          'dollar': './tests/lib/zepto',
          'store': '.',
          'knockout': './vendor/knockout',
          'lang': './vendor/lodash',
          'spec': './tests/spec'
        }
      }
    );
    require([
      //include all specs to be run
      'knockout',
      'Memory',
      'Observable',
      'lang'
    ],
      function(ko, MemoryStore, Observable, lang) {

        var store = window.store = Observable( new MemoryStore({
          data: [
            { id: 'porridge', type: 'breakfast' },
            { id: 'muesli', type: 'breakfast' },
            { id: 'parkin', type: 'elevenses' }
          ]
        }));
        
        var viewModel = {
          breakfasts: store.query({ type: 'breakfast'})
        };

        viewModel.breakfasts.subscribe(function(resultsArray, details){
          console.log("Change to breakfasts results: ", details);
        });

        ko.applyBindings(viewModel);
        
      });
  </script>
</body>
</html>
